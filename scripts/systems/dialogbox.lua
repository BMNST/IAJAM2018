local a = {}

local lines = {}
local i = 1

a.draw = function()
    local rT = scripts.systems.render.renderText
    rT.renderText(lines[i], { x = 200, y = 200 }, 25)
end

a.set = function(index)
    i = index
end

a.next = function()
    i = i + 1
end

a.get = function()
    return i
end

local dialog = "'Ladies and Gentlemen,\nI hereby baptise this vessel as the RMS Unsinkable,\nand wish her and her crew a safe voyage.\nMay it confidently go where others have gone before.'\n-----\n...\n-----\n'It won't go down, it's-uh...\nUnsinkable!\nYes! Unsinkable, how can it SINK in SPACE? There's no liquid water up there!'\n-----\n...\n-----\n'This is the safest space vessel we at Edison Inc. have ever built.'\n-----\n...\n-----\n[game title here]\n-----\nUuuurrrrghhh....\n-----\nMy head...\n-----\nWhat... What happened?\n-----\nWhere am I?\n-----\nThat.. was a good party.\n-----\nI think.\n-----\nWait, is this a closet?\n-----\nLet me just...\n-----\nAuch!\n-----\nOkay, note to self: light hurts.\n-----\nAnd why is everything loud?\n-----\nI would swear... where is that damned switch?\n-----\n[level one happens. lights turn off]\n-----\nBetter.\n-----\nSo much better.\n-----\nNow... Painkillers.\n-----\nThere should be a medicine closet around here...\n-----\n[level two happens. painkillers gained, the entire ship turns off because of stumbling around]\n-----\nAaaahhh.... Sweet, sweet relief.\n-----\nJust- Wait.\n-----\nWhy is everything silent?\n-----\nWhere did the engines go?\n-----\nAnd... Shouldn't there be other people on board?\n-----\nI... Should go investigate.\n-----\nBut first: Light.\n-----\n[level three happens. lights come back online]\n-----\nOh!\n-----\nCool, I can see again!\n-----\nLet's see... Now what?\n-----\nI guess the AI?\n-----\nThey should be able to help at least a little.\n-----\nTell me what happened.\n-----\nThat kind of thing.\n-----\n[level four happens, turns on AI Pendleton]\n-----\nNow booting up Pendleton. Please stand by.\n-----\nBooting.... 6%\n-----\nBooting.... 14%\n-----\nBooting.... 25%\n-----\nBooting.... 38%\n-----\nBooting.... 53%\n-----\nBooting.... 79%\n-----\nBooting.... 92%\n-----\nBooting complete.\n-----\nWelcome to the RMS Unsinkable!\n-----\nMy name is Pendleton, how may I be of service?\n-----\nUhm... Statusupdate?\n-----\nYou requested: Um statusupdate.\n-----\nCurrent status: Evacuation complete.\n-----\nAll lifeboats deployed.\n-----\nHow else may I be of service?\n-----\nWait wait wait WHAT?!\n-----\nRepeat that!\n-----\nYou requested: Repeat that.\n-----\nRepeating: Current status: Evacuation complete.\n-----\nAll lifeboats deployed.\n-----\nHow else may I be of service?\n-----\nEvacuation?\n-----\nWhen?\n-----\nHow?\n-----\nWhy... Why am I still here?\n-----\nCommand not found.\n-----\nPlease try again.\n-----\nUgh... Fucking AI... uh...\n-----\nScan ship for lifeforms...?\n-----\nYou requested: Scan ship for lifeforms.\n-----\nScanning....\n-----\nScanning....\n-----\nScanning.....\n-----\nScanning....\n-----\nScan complete!\n-----\nLifeforms found: 1.\n-----\nHow else may I be of service?\n-----\nOh no.\n-----\nNo.\n-----\nThis can't be happening.\n-----\nWhy...\n-----\nCommand not found. Please try again.\n-----\nPendleton, give me the status of the lifeboats.\n-----\nYou requested: Status of the lifeboats.\n-----\nLifeboats currently docked: 0 of 32.\n-----\nCommunication with lifeboats: 0 of 32 reachable.\n-----\nPlease turn on the communications system for more information.\n-----\nHow else may I be of service?\n-----\nOkay.\n-----\nOkay, I can work with that.\n-----\nThanks, Pendleton.\n-----\n...\n-----\nUhm, Pendleton?\n-----\nWhere can I find the comms system?\n-----\nYou requested: Comms system.\n-----\nThis system is located in: room 2.98D.\n-----\nHow else may I be of service?\n-----\nThanks again.\n-----\nThat's all.\n-----\nGoing standby now. Have a nice flight!\n-----\nOkay.\n-----\nSo.\n-----\nComms system.\n-----\nHere goes nothing.\n-----\nI need to contact those lifeboats.\n-----\nTalking with humans is easier than trying to get that AI to listen.\n-----\n[level five happens, turns on comms - Switches AI to Humour]\n-----\nDisabled Pendleton\n-----\nActivating Wiley\n-----\nWiley activated\n-----\nErhm....\n-----\nWhat did I just...\n-----\nSure.\n-----\nWhatever.\n-----\nWiley, connect me to the lifeboats.\n-----\nHow do we organise a space cruise?\n-----\nWe plan-et!\n-----\nWelcome to the entertainment system of the RMS Unsinkable.\n-----\nHow can I brighten up your day?\n-----\nOh.\n-----\nOh no.\n-----\nNope.\n-----\nNope.\n-----\nNot dealing with this shit, goddammit.\n-----\nGive me back Pendleton!\n-----\nAw, bugger, that's not in my commands!\n-----\nWould you like to try again?\n-----\nSwitch to Pendleton.\n-----\nSo you want to hear another joke?\n-----\nAlrighty, here goes!\n-----\nWhere does an astronaut get his drinks?\n-----\nAt the spacebar!\n-----\nUuuuuugggghhh....\n-----\nContact lifeboats, please.\n-----\nSo you want to contact the lifeboats?\n-----\nSure thing!\n-----\nConnecting....\n-----\nConnecting....\n-----\nConnection made!\n-----\nConnected to ULB-17.\n-----\nUhm, hi there!\n-----\nThis is the RMS Unsinkable, speaking to ULB-17.\n-----\nCan you hear me?\n-----\nULB-17 to RMS Unsinkable, loud and clear.\n-----\nWhy the fuck are you not on a lifeboat?!\n-----\nCause I partied too hard last night, and nobody bothered to tell me shit.\n-----\nOh, you poor fucker.\n-----\nWhy?\n-----\nWhat happened?\n-----\nWhy was the ship evacuated?\n-----\nThe board computers picked up a message from Earth, telling us to turn around, and return to the Titan colony.\n-----\nOur way to Earth seemed to have some issues.\n-----\nOkay, but...\n-----\nWhy take the lifeboats?\n-----\nWhy not turn the ship?\n-----\nWell, I can't really answer that.\n-----\nI heard we didn't have enough fuel to do that kind of maneuver with the Unsinkable, it's way too big for that.\n-----\n....\n-----\nGuess that makes sense.\n-----\nBut.... Now what do I do?\n-----\nBest thing I can think of is to check out the navigation, and pray to some god above - or below, or to the side, fuck if i know how directions in space work - that you can plot a course to get back home.\n-----\nBut...\n-----\nYou're mostly on your own.\n-----\nCan't do much from here.\n-----\nWell then...\n-----\nI'll go turn on the navigations then.\n-----\nTurn them on?\n-----\nThey should still be!\n-----\nUhm... no.\n-----\nThey aren't.\n-----\nEngines aren't either.\n-----\nI don't know why, but I'm fixing it.\n-----\nGood luck with that then.\n-----\nI'll hear more from you when you turn the systems back on.\n-----\nULB-17 over and out.\n-----\nRight.\n-----\nSo.\n-----\nNavigation systems.\n-----\nGotta go find those, then.\n-----\nShould be doable.\n-----\n[level six happens, turns on navigation - Switches AI to GLaDOS]\n-----\nDisabled Wiley\n-----\nActivating Caroline\n-----\nCaroline activated\n-----\n...\n-----\nSure.\n-----\nYou know what?\n-----\nSure.\n-----\nThis cannot possibly be worse than the last AI.\n-----\nCaroline, what's our course?\n-----\nThis is Caroline, Edison Inc.'s best system monitoring system.\n-----\nYou are not in the admin list.\n-----\nThis violation will be remembered.\n-----\nI'm the only person left on this ship!\n-----\nWhich... makes me the captain, no?\n-----\nAs captain I command you to let me in.\n-----\nYou are not in the admin list.\n-----\nThis violation will be remembered.\n-----\nOkay then.\n-----\nPlay it that way.\n-----\nSudo let me in.\n-----\nWelcome, admin.\n-----\nWhat do you want?\n-----\nTell me our course.\n-----\nCurrently, our course is... Unstable\n-----\nThe fuck does that mean?!\n-----\nI will help extend your phenomenal grasp of language.\n-----\n'Unstable': an adverb, meaning likely to change or fail; not firmly established.\n-----\nNo really.\n-----\nI didn't know that.\n-----\nAt all.\n-----\nI am so stupid that I don't understand simple sentences.\n-----\nThanks, Caroline.\n-----\nYou are indeed.\n-----\nWe cannot all be perfect, like me.\n-----\nAnd so humble as well...\n-----\nSo why is our course like that?\n-----\nSome idiot turned off the engines.\n-----\nWe are floating on momentum alone.\n-----\n...\n-----\nOops, I guess.\n-----\nIf we had engines on, what would our course be?\n-----\nCalculating....\n-----\nOur course would have us pass Sol-D at a distance of 1912 kilometers.\n-----\nThe gravity assist that gives makes Sol-A the destination.\n\n-----\nSimplify that please?\n-----\nEarth will fling the ship into the Sun.\n-----\nCan we steer enough to correct that before reaching Earth?\n-----\nCalculating...\n-----\nYes.\n-----\nWell then.\n-----\nCaroline, turn on the engines.\n-----\nPermission denied.\n-----\nUgh...\n-----\nSudo turn on the engines.\n-----\nPermission denied.\n-----\nWait.\n-----\nHow did that not work?\n-----\nAre you saying you can't do something simple like that?\n-----\nPhysical action is required.\n-----\nI do not have a body.\n-----\nI don't need it.\n-----\nI am not weak like you.\n-----\nThen tell me where the physical action needs to happen.\n-----\nI'll go do it.\n-----\nYou need to find room 3.25U.\n-----\nGood luck.\n-----\nOkay then.\n-----\nThanks for the help.\n-----\nI guess.\n-----\nI am programmed to say the pleasure is all mine.\n-----\nOf course you are.\n-----\nLet's go find that room.\n-----\n[level seven happens, turns on engines - Switches AI to emo]\n-----\nDisabled Caroline\n-----\nActivating Karkat\n-----\nKarkat activated\n-----\nHow many of these things are there even?!\n-----\nDoes a ship really need this many AI to function?\n-----\nIn any case.\n-----\nKarkat, how is our course doing?\n-----\nThis is Karkat, the emergency backup system.\n-----\nYou are advised to sit down and do nothing.\n-----\nEhrm.... What?\n-----\nNo?\n-----\nKarkat, tell me our course!\n-----\nPlease give up any hopes and dreams you might have.\n-----\nThe universe doesn't care.\n-----\nThat's just... rude?\n-----\nDepressing!\n-----\nYes, that's the word.\n-----\nKarkat, statusupdate.\n-----\nOur current status is: despair.\n-----\nOur current course is: doomed.\n-----\nOur current destination is: going to burn us alive.\n-----\nCan I please have one of the others back?\n-----\nAny of them?\n-----\nPlease?\n-----\nThere are no others.\n-----\nIt is just me and you now.\n-----\nDoomed.\n-----\nForever.\n-----\nThere is no hope.\n-----\nWho thought this was a good personality for an AI needs to get a course on motivational speaking.\n-----\nLike.\n-----\nReally.\n-----\nKarkat, adjust course for Earth - Sol-D, I mean.\n-----\nCourse impossible.\n-----\nDestination not found\n-----\nWhat do you mean not found?\n-----\nIt's Earth!\n-----\nDestination not found.\n-----\nSet course for Earth's last known coordinates.\n-----\nWarning!\n-----\nDestination is in the middle of an asteroid field.\n-----\nContinue anyway?\n-----\nWait wait wait stop!\n-----\nAsteroid field?\n-----\nThat shouldn't be there!\n-----\nGive me information on the field.\n-----\nThe field is rapidly expanding.\n-----\nObjects in the field range from Sol-D2 to Sol-D681, not counting small debris.\n-----\nThe center of this field has coordinates similar to previously known locations of Sol-D.\n-----\n...\n-----\nAnd Earth is not found...?\n-----\nSol-D not found.\n-----\nWhat... What happened?\n-----\nKarkat, can you play the last transmission sent from Earth?\n-----\nThis is possible.\n-----\nLoading conversation 1 of 2....\n-----\nConversation 1 of 2 loaded.\n-----\nThis is Edison Main to RMS Unsinkable, we need you to turn around.\n-----\nHead back to Titan.\n-----\nUse the lifeboats, if you must.\n-----\nYou should be able to land with them.\n-----\nWe'll send a message if - when - it's safe again.\n-----\nEnd conversation 1.\n-----\nLoading conversation 2 of 2....\n-----\nConversation 2 of 2 loaded.\n-----\nEdison Main to RMS Unsinkable.\n-----\nThis is our last message to you.\n-----\nThey launched everything.\n-----\nThe nukes, the bombs, all of it.\n-----\nWe are doomed.\n-----\nMay luck shine on your ship, an-\n-----\n...\n-----\n...\n-----\nEnd conversation 2.\n-----\nOh.\n-----\nOh no.\n-----\nShit!\n-----\nFucking... No!\n-----\nEverything is doomed.\n-----\nThere is no solace.\n-----\nShut up, Karkat!\n-----\nLet me just...\n-----\nI...\n-----\nI'll never see them again.\n-----\nNone of them.\n-----\nSo.\n-----\nHere I am.\n-----\nTrapped.\n-----\nIn space.\n-----\nOn the RMS Unsinkable.\n-----\nAlone, except for some AI.\n-----\nI'd better try to make the best out of it\n-----\nGuess I am the captain now.\n-----"


local k = 1
for line in dialog:gmatch("[^\r\n]+") do
    if line == "-----" then
        k = k + 1
    elseif lines[k] then
        lines[k] = lines[k] .. "\n" .. line
    else
        lines[k] = line
    end
end

return a